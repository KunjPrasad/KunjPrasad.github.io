<!--
    HTML book: Productionizing Backend Development, by Kunj Prasad on Github.
    Copyright (C) 2020  Kunj Prasad

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Productionizing Backend Development</title>
		<meta name="description" content="Productionizing Backend Development HTML E-book">
		<meta name="author" content="Kunj Prasad">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv='Pragma' content='no-cache'>
		<meta http-equiv='Cache-Control' content='no-cache'>
		<link rel="stylesheet" href="/utilities/styles-common.css" type="text/css">
		<link rel="stylesheet" href="styles.css" type="text/css">
		<style type="text/css"></style>
	</head>
	
	<body>
		<header>
			<h1>Productionizing Backend Development</h1>
		</header>
		<nav>
			<a id="1606665479" href="introduction.html">Introduction</a>
			<a id="1607048361" href="one-line-summary.html">One line summary</a>
			<a id="1606703843" href="personal-notes.html">Personal notes</a>
			<a id="1606665918" href="/utilities/disclaimer-generic.html">Disclaimer</a>
			<a id="1611203334" href="/utilities/acknowledgement-generic.html">Acknowledgement</a>
			<section>
				<h2>Glossary</h2>
				<a id="1608303678" href="glossary/req-resp.html">Request and response related terms</a>
				<a id="1608343369" href="glossary/security.html">Security related terms</a>
				<a id="1608344347" href="glossary/testing.html">Testing related terms</a>
				<a id="1608344358" href="glossary/housekeeping.html">Application housekeeping related terms</a>
				<a id="1608344368" href="glossary/infrastructure.html">Infrastructure related terms</a>
				<a id="1611200362" href="glossary/data-storage.html">Data storage related terms</a>
				<a id="1608344385" href="glossary/architecture.html">Architecture related terms</a>
			</section>
			<section>
				<h2>1-way interaction</h2>
				<a id="1609385770" href="one-way/introduction.html">Introduction</a>
				<a id="1609472905" href="one-way/entity.html">Entity</a>
				<a id="1609472910" href="one-way/dto.html">Data transfer object (DTO)</a>
				<a id="1609472915" href="one-way/controller.html">Controller</a>
				<a id="1609472920" href="one-way/service.html">Service</a>
				<a id="1609472930" href="one-way/repository.html">Repository</a>
				<a id="1609472935" href="one-way/filter.html">Filter</a>
				<a id="1609472940" href="one-way/renderer.html">Renderer</a>
				<a id="1609472945" href="one-way/exception-handler.html">Exception handler</a>
				<a id="1609472950" href="one-way/user-auth-auth.html">User auth/auth</a>
				<a id="1609472955" href="one-way/feature-flag.html">Feature flag</a>
				<a id="1609472960" href="one-way/req-attributes.html">Custom request attributes</a> <!-- TODO: Move under additional terms -->
				<a id="1609385771" href="one-way/additional-terms.html">Additional terms</a>
			</section>
			<section>
				<h2>2-way interactions</h2>
				<a id="1609474984" href="two-way/transaction.html">Transaction</a>
			</section>
			<section>
				<h2>Advanced</h2>
				<a id="1612275340" href="advanced/code-arrangement.html">Code arrangement</a>
				<a id="1612275350" href="advanced/api-documentation.html">API documentation</a>
				<a id="1612275360" href="advanced/data-governance.html">Data governance</a>
				<a id="1612275370" href="advanced/logging.html">Logging</a>
			</section>
			
			
			<!-- TODO
			
			**IMPORTANT:: Remember to update sitemap periodically, and comment out sections under development. Best.. update f adding/removing links, change sitemap
			
			**IMPORTANT:: To new files, add 
	<aside class="shown-individually-but-hidden-in-ebook"><i><strong>Read it in ebook <a href="/productionizing/productionizing-backend-development/#1609472915">here</a></strong></i></aside>
			
			
			
			//GLOSSARY
			
			
			Introduction: Link to productionizing as from wiki

			In CICD, Testing:
			https://towardsdatascience.com/ci-cd-by-example-in-python-46f1533cb09d
			
			
			
			
			Good to include somewhere, maybe introduction, as motivation:
			https://medium.com/better-programming/5-things-i-wish-i-had-known-before-majoring-in-software-development-7b2cb3cf288d
			
			

			In OOP:
			-- Related: Give proper variable name, don't skimp!!
			-- proper convention for variable naming, method and class naming.
			
			
			
			TDD: This way you can just focus on ensuring that there's a test for all requirements. This is documentation + greatly helps in debugging because rather than going in nitty gritties of code, you go over tests. Declarative code is better because it is less error prone A drawback of code review in that it creates a development/pause cycle which reduces velocity. However, on other side, it gives space for new ideas to come or for ideas that were initially suppressed to come out. Less one person dominance. So, maybe not good for start-up phase, but better for later expansion.
			-- Mobbing vs code review: Sprint vs Kamban -- these are dilemmas of speed vs consensus. When speed is needed and everything else is well defined.. it goes to Kamban, mob program style. When there can be variability and everyone needs to be on consensus, then need to give time to everyone.. and sprint / code review style becomes important


			
			Security
			-- Security based on hidden variable name alone isn't security
			-- Add other security issues. mention content security policy. Add ModHeader and add response header. Link to tips page
			
			--|---- Login CSRF
			
			--|---- Don't rely on cookie only for security. Use CSRFToken, or JWT. Using both is overkill. JWT does make you cloud ready
			
			-- Look for notes in spring security, like changing session after login, clearing session on logout, adding x-content-type-options: nosniff. 
			-- See https://blog.avast.com/why-is-ebay-port-scanning-my-computer-avast and https://nullsweep.com/why-is-this-website-port-scanning-me/ -- don't port scan. If you want to do so for security, then offer as a service and start/stop it when user asks. Don't do so in a hidden cryptic way. Link to tips page
			
			-- Security - chpt 26 of 2 scoops - go through it
			--|---- Basic thing for security:: see "Server Hardening", section 26.2 in pg.346 of 2 scoops:: Server hardening measures include but are not limited to things like setting up firewalls (help.ubuntu.com/community/UFW), changing your SSH port, and disabling/removing unnecessary services.
			--|---- **VERY VERY VERY IMPORTANT**: Good practice -- You should disable the HTML field autocomplete browser feature on fields that are gateways to payment. This includes credit card numbers, CVVs, PINs, credit card dates, etc. The reason is that a lot of people use public computers or their personal computers in public venues. In fact, consider changing the form field itself to PasswordInput. Also on that line - never store credit card data.
			--|---- Section 26.13 on Pg.357 about file handling. 
			--|----|---- Use CDN for file (I think this is more of a performance thing and to prevent getting your server drowned in false request).
			--|----|---- Since user uploaded file can have xss content, so don't have it open in browser by only allowing it to be downloaded - done by setting "content-disposition:attachment"
			--Link to glossary >> storage >> filesystem >> garbage data.. that it needs to be encrypted, else it can be accessed by someone who gets proper access to your notebook (i.e. filesystem). Also, that's why everything must be purged before throwing disk.
			
			--|---- **VERY VERY VERY IMPORTANT**: If working with custom user data which can be xml.. then realize that there can be a ddos attack done. See https://en.wikipedia.org/wiki/Billion_laughs_attack -- the article mentions that this attack can be done on any language with references (like, on YAML)
			--|---- 
			
			
			-- sql injection
			-- Avoid inernal XSS. This comment is written earlier also::  If your DTO fields, path param, etc. has constrainst, like can be a-z,A-Z,0-9,_, then also realize these constraints in the field definition. DOn't just take any arbitrary string. Take only the ones expected. This can be useful in preventing internal xss, i.e., say as part of your logic, you are logging these field values, etc. - and then are running some daily background task, possibly to collect some metric. Since these are external user data - you shouldn't be trusting it.. and some user may try to pass in a script that inadvertantly gets run. This is internal XSS. The point is - don't trust any data comingf rom out till you've verified it. Similar also holds for fields containing html text from user.. Best would be to just get markup (and define an enum type column which highlights that the entry being read is of markup type, not html).. but if you do need to store html, then escape it as you form the request body itself. Also note that this promotes reusability, setting standards in project.
			
			
			
			
			
			
			
			
			Cover these 3 points, and link to prod-prod
			Rule of 3 to identify refactor (link to glossary/architecture.html)
			-- Foolish consistency is hogoblin (link to introduction.html)
			-- if needed, go for speed, and cover tech debt later. Business first (link to introduction.html, glossary/architecture.html)
			
			
			
			
			
			-- don't indiscriminately use cookies. Add security: https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#Security   ;  Note that GDPR applies to them - so be careful and considerate in storing them: https://gdpr.eu/cookies/
			
			
			-- SANITIZE calls : PII should delete data, not relations.
			
			
			

			
			
			
			
			//ONE WAY -- INTRODUCTION
			
			https://stackoverflow.com/questions/38677889/difference-between-service-layer-and-controller-in-practice/38678061#38678061 -- Looking in Java view of controller, service, repository... controller holds interaction with request; service has business logic and no request based logic; repsitory has database logic and only interacts with service. Best to do everything in one transaction -- even the conversion from slugs into corresponding entity.
			--|---- For this reason, process serializers in Django should not do anything with child slug.. if you are using SlugRelated field, then keep it as read-only, or create-new.. don't modify. On flip side, if you are worried about the entity changing in span of request.. then best you are pessimistic locking and not rely on just using single transaction.
			

			
	
			
			
			mvc - a 3-way interaction.. but idealy should be more.. but mvc squashes dto and entity. And controller squashes service and repo.
			
			
			-- Advanced case: DAG structure for ManyToMany field: DTO, Entity, url, create/update/delete: what happens first and what follows
			-- Advanced case: multi-representation of same data: Resume as text and pdf; DTP, model, url, create/update/delete
			-- Using "If-Modified-Since". Should it bubble, i.e. when a child is changed, then also its parent entity is also updated (This also relates to keeping auditlog entry)? - I'd say no. This means that when showing a DTO, one should NOT show childDTO because that then breaks the meaning of parentDTO being non-modified. A workaround could be to simply return url where one can get childDTO
			--|---- This is a good argument on why a REST GET url should only returns resource and no parent/child DTO. returning any extra information mixes the update time for two and so, is like a caching strategy. Best, and always, add cache depending on your use case and not preliminarily. This also sets up a guideline in that your GET call should end up asking for a resource and only that resource (not parent/child) should be returned
			
			
			
			
			
			
			-->
		</nav>
		<main tabindex="0"></main>
		<footer></footer>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
		<script type="module">
			import { onUploadNoteFileChange, onDownloadNoteFile, onDocumentLoad } from './scripts.js';
			$(document ).ready(onDocumentLoad);
			$("main").on("change", "#note-file-upload-input", (event) => onUploadNoteFileChange(event.target.files[0]));
			$("main").on("click", "#note-file-download-button", onDownloadNoteFile);
		</script>
	</body>
<html>