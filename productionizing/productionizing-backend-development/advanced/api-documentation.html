<!--
    HTML book section: API Documentation in Advanced Topics for Productionizing Backend Development, by Kunj Prasad on Github.
    Copyright (C) 2020  Kunj Prasad

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<article>
	<h2>API documentation</h2>
	<p id=""></p>
	
	<nav class="article-toc">
		<h3>Table of contents</h3>
		<ul>
			<li><a href="#" data-nav-id=""></a></li>
		</ul>
	</nav>
	
	<p id=""></p>
	
	<!--
	
	Mntion that tests are a documentation of api for internal devs.. because rather than going in nitty gritties of code, you go over tests. 
	 
	 
	Since the goal is to hav as much automation and as less of separate text code maintenance, so only descrie success scenario and not all other ways in which an eror can happen - since that can change over time. 
	One way to send failure information is by sending list of dto(s) that can trigger failure and you capture those.. but it really seems extra work!!! Can partly capture errors from validation directly on DTO field
	
	
	
	-- NOTE: glossary/housekeeping/#1608689286 -- mentions HATEOAS, OpenApi..
			
			HATEOAS + SWAGGER!!:
			
			-- cover HATEOAS: 
			--|---- use id=1619285636
			--|---- Referenced in: one-way/controller/#1619287660 -- Repeat that HATEOAS is needed because it's like the right click giving more info.
			
			-- A minimal HATEOAS for a directory should only show: (1) all HTTP verbs available at folder level, (2) only the OPTION http verb available at child level. The idea of always adding a single item url corresponding to a list url (mentioned in one-way/controller/#1619288885) is a good way to ensure so - otherwise the HATEOAS design gets complex where one must dynamically query for each list level url whether the individual item url is available
			--|---- Not covered in subsections under one-way/controller/"RESTful URL design" - what should be the response for GET and OPTIONS for root URL. Cover here.. OPTIONS of root url should also provide info on other urls that can be followed from there. These are top level urls. one-way/controller/#1619365342 says to return information about GET for child URL.. but ideally only give infor about OPTIONS url
			
			-- See two-way/controller+user/#1619574292 -- it may be better to use nested design for one user role.. and flat design for super role. When doing so, make sure that each shows proper documentation. Since the section suggests not redirecting from one to another, reflect the same idea in service also
			
			-- See one-way/controller/#1619373122 -- when doing versioning by hateoas.. maybe only show the versions specific to user! This means that user permission should be independent "aspect" of controller such that it can be reused for both controller processing progress and for hateoas. Also -- this doesn't have anything to do with 400, 404 status.. so it can be kept separate from queryset filtering logic.
			
			-- By OPTIONS spec "The response payload, if any, might also describe the communication options in a machine or human-readable representation.  A standard format for such a representation is not defined by this specification, but might be defined by future extensions to HTTP.  A server MUST generate a Content-Length field with a value of "0" if no payload body is to be sent in the response." -- This also decouples GET from OPTION. You don't have to change response structure to support HATEOAS.. but just make it a different call.
			--|---- note the "Location" response header should be used to provide information about created resource. HATEOAS gives information on other things that can be done with the resource - and is business dependent logic. Maybe if all you are doing is returning some links then that can be done viaresponse headers instead.. but using HATEOAS also allows customizing and sending text data back to further guide user's decision. Also, firewall may remove non-standard headers, so having details in request body is better
			
			-- Make it role based
			
			1) In Hateoas links, apart from internationalization 
---- also give security detail : who all will be accessing the data. Is there any restriction on mutating data, etc. Maybe just give link to security policy
---- a question is if you can guide users into using your webpage/REST-url in suitable flow. Maybe each URL within each level can be numbered so that users are guided. For some who have already done part of work.. they can skip those portions and get to next step. Maybe give guidance on how a user can identify which step they should start with.. say by doing successive GET calls.

			2) If a field/fields can take enumerated value only, then give all possible combination.. or url to get combination possibility, along with what they mean. This helps user understand enum values which are not in their language. Maybe give different enum-options based on the language selected by user?!! and/or add a translator at beginning so that the json data is translated to one understood by server.. even though it starts from one that is understood by server
			
			-- HATEOAS or swagger, or both?! See https://stackoverflow.com/questions/54839672/difference-between-swagger-hateoas  
			--|---- If using Swagger, also set custom headers, authentication.. and also add unit tests to verify that swagger spec getting generated has expected values
			--|---- Since HATEOAS is REST version of a UI, try to return only as much related content as allowed for a role
			--|---- Don't show HATEOAS text on error, you might end up causing leaks if user is not allowed to see the text. The error message should be descriptive enough. Not sure though.. maybe there's better process. Like, can point to homepage or a support page.
			
			-- For Swagger: when reading model field description -- best if the plugin being used can do by reading DB comment. This keep DB field comment as only source of truth when defining field definition text.
			
			-- At a later stage... consider internationalizing your error response and your HATEOAS!! Maybe swagger also!
			
			-- The use of field in DTO to control validation application for error vs warning level validation can be explained in HATEOAS
			
			
	
	-->
	
	<aside class="shown-individually-but-hidden-in-ebook"><i><strong>Read this article, and more, in ebook <a href="/productionizing/productionizing-backend-development/#1612275350">here</a>.</strong></i></aside>
</article>
