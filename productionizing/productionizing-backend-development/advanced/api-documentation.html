<!--
    HTML book section: API Documentation in Advanced Topics for Productionizing Backend Development, by Kunj Prasad on Github.
    Copyright (C) 2020  Kunj Prasad

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<article>
	<aside class="shown-individually-but-hidden-in-ebook"><i><strong>Read it in ebook <a href="/productionizing/productionizing-backend-development/#1612275350">here</a></strong></i></aside>
	<h2>API documentation</h2>
	<p id=""></p>
	
	<!--
	Since the goal is to hav as much automation and as less of separate text code maintenance, so only descrie success scenario and not all other ways in which an eror can happen - since that can change over time. 
	One way to send failure information is by sending list of dto(s) that can trigger failure and you capture those.. but it really seems extra work!!! Can partly capture errors from validation directly on DTO field
	
	
	
			
			HATEOAS + SWAGGER!!:
			
			-- By OPTIONS spec "The response payload, if any, might also describe the communication options in a machine or human-readable representation.  A standard format for such a representation is not defined by this specification, but might be defined by future extensions to HTTP.  A server MUST generate a Content-Length field with a value of "0" if no payload body is to be sent in the response." -- This also decouples GET from OPTION. You don't have to change response structure to support HATEOAS.. but just make it a different call.
			--|---- note the "Location" response header should be used to provide information about created resource. HATEOAS gives information on other things that can be done with the resource - and is business dependent logic. Maybe if all you are doing is returning some links then that can be done viaresponse headers instead.. but using HATEOAS also allows customizing and sending text data back to further guide user's decision. Also, firewall may remove non-standard headers, so having details in request body is better
			
			-- Make it role based
			
			1) In Hateoas links, apart from internationalization 
---- also give security detail : who all will be accessing the data. Is there any restriction on mutating data, etc. Maybe just give link to security policy
---- a question is if you can guide users into using your webpage/REST-url in suitable flow. Maybe each URL within each level can be numbered so that users are guided. For some who have already done part of work.. they can skip those portions and get to next step. Maybe give guidance on how a user can identify which step they should start with.. say by doing successive GET calls.

			2) If a field/fields can take enumerated value only, then give all possible combination.. or url to get combination possibility, along with what they mean. This helps user understand enum values which are not in their language. Maybe give different enum-options based on the language selected by user?!! and/or add a translator at beginning so that the json data is translated to one understood by server.. even though it starts from one that is understood by server
			
			-- HATEOAS or swagger, or both?! See https://stackoverflow.com/questions/54839672/difference-between-swagger-hateoas  
			--|---- If using Swagger, also set custom headers, authentication.. and also add unit tests to verify that swagger spec getting generated has expected values
			--|---- Since HATEOAS is REST version of a UI, try to return only as much related content as allowed for a role
			--|---- Don't show HATEOAS text on error, you might end up causing leaks if user is not allowed to see the text. The error message should be descriptive enough. Not sure though.. maybe there's better process. Like, can point to homepage or a support page.
			
			-- For Swagger: when reading model field description -- best if the plugin being used can do by reading DB comment. This keep DB field comment as only source of truth when defining field definition text.
			
			-- At a later stage... consider internationalizing your error response and your HATEOAS!! Maybe swagger also!
			
			-- The use of field in DTO to control validation application for error vs warning level validation can be explained in HATEOAS
			
			
	
	-->
</article>
